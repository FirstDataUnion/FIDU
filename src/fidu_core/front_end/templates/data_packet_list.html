{% if data_packets %}
    <div class="stats-bar">
        <div class="stats-info">
            <div class="stat-item">
                <div class="stat-number">{{ total_count }}</div>
                <div class="stat-label">Total Packets</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">{{ filters.limit }}</div>
                <div class="stat-label">Per Page</div>
            </div>
        </div>
        <div class="filter-summary">
            {% if filters.tags or filters.profile_id or filters.from_timestamp or filters.to_timestamp %}
                <small>Filters applied</small>
            {% endif %}
        </div>
    </div>

    <div class="data-packets-container">
        {% for packet in data_packets %}
            <div class="packet-card">
                <div class="packet-header">
                    <div class="packet-id">Packet ID: {{ packet.id }}</div>
                </div>
                
                <div class="packet-timestamp">
                    created: {{ packet.create_timestamp.strftime('%Y-%m-%d %H:%M:%S') }}
                </div>
                <div class="packet-timestamp">
                    last updated: {{ packet.update_timestamp.strftime('%Y-%m-%d %H:%M:%S') }}
                </div>
                <div class="packet-tags">
                    {% for tag in packet.tags %}
                        <span class="tag">{{ tag }}</span>
                    {% endfor %}
                </div>
                <div class="packet-data-header"><strong>Data:</strong></div>
                <div class="packet-content">
                    <br>{{ packet.data | tojson(indent=2) }}
                </div>
            </div>
        {% endfor %}
    </div>

    {% if total_count > filters.limit %}
        <div class="pagination">
            {% if filters.offset > 0 %}
                <button hx-get="/data-packets/list?offset={{ filters.offset - filters.limit }}&limit={{ filters.limit }}&tags={{ filters.tags }}&user_id={{ filters.user_id }}&packet_type={{ filters.packet_type }}&sort_order={{ filters.sort_order }}"
                        hx-target="#data-packets-content"
                        hx-indicator="#loading-indicator">
                    Previous
                </button>
            {% endif %}
            
            <button class="current">{{ (filters.offset // filters.limit) + 1 }}</button>
            
            {% if filters.offset + filters.limit < total_count %}
                <button hx-get="/data-packets/list?offset={{ filters.offset + filters.limit }}&limit={{ filters.limit }}&tags={{ filters.tags }}&user_id={{ filters.user_id }}&packet_type={{ filters.packet_type }}&sort_order={{ filters.sort_order }}"
                        hx-target="#data-packets-content"
                        hx-indicator="#loading-indicator">
                    Next
                </button>
            {% endif %}
        </div>
    {% endif %}
{% else %}
    <div class="empty-state">
        <h3>No data packets found</h3>
        <p>Try adjusting your filters or check if there are any data packets in the system.</p>
    </div>
{% endif %} 